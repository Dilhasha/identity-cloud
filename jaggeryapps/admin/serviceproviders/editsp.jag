<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>WSO2 Cloud-Admin Portal</title>
        <!-- Bootstrap -->
        <link href="../css/bootstrap-3.2.0/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/fontwso2-1.2/css/font-wso2.css">
        <link href="../css/font-awesome-4.2.0/font-awesome.min.css" rel="stylesheet">
        <link href="../css/web-fonts/Roboto.css" rel="stylesheet">
        <link href="../css/styles.css" rel="stylesheet">
        <link href="../css/select2-4.0.0/select2.min.css" rel="stylesheet">
        <link href="../css/select2-4.0.0/select2.override.css" rel="stylesheet">
       <script src="../js/jquery-1.11.1/jquery.min.js"></script>
        <script type="text/javascript" src="../serviceproviders/custom/serverinfo.jag"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/editsp.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/validations.js" type="text/javascript"></script>
        <script type="text/javascript" src="../js/custom/identity-validate.js"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/jquery.validate.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/gatewayConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/claimConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/samlConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/oauthConfig.js" type="text/javascript"></script>
        <script type="text/javascript" src="../serviceproviders/custom/js/constants.js" type="text/javascript"></script>
        <script type="text/javascript" src="../js/select2-4.0.0/select2.full.min.js"></script>
        <script type="text/javascript" src="../js/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
        <link rel="shortcut icon" href="../images/favicon.png">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <!-- BOF cloud menu -->
        <%
require("../util/constants.jag");
var docUrls = require('/conf/site.json').appTypeDocUrls;
var appStatus = null;
var matcher = new URIMatcher(request.getRequestURI());
var applicationName;
if (matcher.match('/' + ADMIN_PORTAL_NAME + '/serviceprovider/{appname}')) {
    var arguments = matcher.elements();
    applicationName = arguments.appname;
    appStatus =  request.getParameter('status');
}
include("../templates/header.jag");
include("/util/encode.jag");
%>
<script>
const appStatus = "<%=encode.forJavaScript(appStatus)%>";
</script>
<input type="hidden" value="<%=encode.forHtml(applicationName)%>" id="appName">
<!-- BOF App  menu -->
<div class="navbar navbar-secondary">
    <div class="container-fliud">
        <div class="row">
            <div class="side-pane-trigger">
                <i class="fa fa-reorder"></i>
            </div>
            <div class="breadcrumb-secondary" id="breadcrumb-sec">
                <i class="fw fw-security" ></i> <span class="hidden-xs">Identity Cloud&nbsp;</span> / Applications / Custom Application / Edit
            </div>
        </div>
    </div>
</div>
 <input type="hidden" id="storeAppType" name="storeAppType" value="">
<!-- EOF App  menu -->
<div class="inner-wrapper">
    <!-- left pane wrapper -->
    <%
include("../templates/leftpane.jag");
%>

<!-- left pane wrapper -->
<div class="right-pane">
<!-- BOF App  menu actionbar -->
<div class="action-bar">
    <a href="/<%=ADMIN_PORTAL_NAME%>/serviceproviders" class="btn-action">
    <span class="fw-stack fw-lg btn-action-ico">
    <i class="fw fw-circle-outline fw-stack-2x"></i>
    <i class="fw fw-left-arrow fw-stack-1x"></i>
    </span> Back to Applications
    </a>
</div>
<!-- EOF App  menu actionbar-->
<div class="container-fluid cloud-container app-edit-form">
   <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div id="goto-store-msg"></div>
        </div>
   </div>
   <div class="row">

      <div class="col-md-6">
         <div class="form-group">
            <!--<label for="service-provider-name">Service Provider Name: </label>-->
            <input id = "spName" name="service-provider-name" type="hidden" class="form-control" placeholder="Enter service provider name" />
            <input id = "oldSPName" name="oldSPName" type="hidden" />
         </div>
         <div class="form-group">
            <!--<label for="service-provider-description" >Description: </label>-->
            <input id = "sp-description" name="service-provider-description" type="hidden" class="form-control" placeholder="Enter service provider name" />
            <!--<textarea id="sp-description" name="service-provider-description" type="hidden" class="form-control" rows="3" ></textarea>-->
            <input type="hidden" value="custom" id="spType" name="spType" />
         </div>
          <div class="row">
              <div class="col-md-12" style="padding-bottom: 20px;">
                  <img style="width: 120px;margin-top: 10px;margin-right: 10px;background-color: #525252;padding: 10px;float: left" id="sp-img"
                       src="../images/sample-app-image.png" alt="wso2" title="wso2" class="logo">
                       <div style="padding: 20px">
                         <h3 id="app-name"> Salesforce </h3>
                       </div>

               </div>
          </div>

          <div class="col-md-12">
                <div class="btn-group hide" style="display: none" id="sso-drop-down">
                    <label class="radio-inline">
                        <input type="radio" onclick="changeRadioGroup($(this))" name="sso-radio" class="custom-radio"
                                 id="radioCm" checked="true" checked />Configure Manually
                    </label>
                    <label class="radio-inline">
                        <input type="radio" onclick="changeRadioGroup($(this))" name="sso-radio" class="custom-radio"
                             id="radioCf"/>Upload SAML Metadata File
                    </label>
                </div>
          </div>


              <!--EO Drop down for manual config and upload content-->

              <!--BO Dropdown for custom app config-->


              <div class="btn-group" id="custom-app-dropdown" style="display: none;">
                  <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="#" id="app-type-dropdown">Select App Type<span
                          class="caret"></span></a>
                  <ul class="dropdown-menu" id="app-type-drop-down">
                      <li><a id="agenttype" href="#">Standards-Based Federation</a></li>
                      <li><a id="proxytype" href="#">Proxy-Based Federation</a></li>
                      <li><a id="shortcut" href="#">Shortcut</a></li>
                  </ul>
                  <div class="app-drop-down-status" style="margin-top: 35px"></div>
                  <label id="agentUrl-error" class="error" hidden="" >This field is required.</label>
              </div>
              <!--EO Dropdown for custom app config-->

              <!--App Type Selection Panel-->
              <div id="customConfig" class="panel panel-default" hidden>
                  <div role="tabpanel" aria-labelledby="gatewayconfig-header">
                      <div class="panel-body inverse">
                          <form class="form-horizontal" role="form" id="custom-config-form" name="custom-config-form">
                              <div class="form-group">
                                  <div class="col-md-12">
                                      <label>Select App Type <span class="required">*</span></label> <i
                                              class="fa fa-question-circle help-tips" data-toggle="tooltip"
                                              data-placement="right"
                                              title="The application templates that allow you to create different types of applications."></i>
                                      <div id="custom-apptype-content">
                                      </div>
                                  </div>
                              </div>
                          </form>
                          <div class="description-block" id="app-type-description">
                              <span class="add-padding-right-1x"><i class="fw fw-info"></i></span>
                              <span id="app-type-desc-span"></span>
                              <a id="app-type-desc-url" href="" target="_blank" class="add-padding-left-1x"><span><i class="fw fw-document"></i></span> Documentation.</a>
                          </div>
                      </div>
                  </div>
              </div>
              <!--App Type Selection Panel-->

              <!--Security Type Selection Panel-->
              <div id="security-type" class="panel panel-default" class="security-type-table" hidden>
                  <div role="tabpanel" aria-labelledby="gatewayconfig-header">
                      <div class="panel-body inverse">
                          <form class="form-horizontal" role="form">
                              <div class="form-group">
                                  <div class="col-md-12">
                                      <label>Select Security Protocol <span class="required">*</span>
                                      </label>
                                      <i class="fa fa-question-circle help-tips" data-toggle="tooltip"
                                              data-placement="right"
                                              title="This is the authentication protocol standard that your application uses to communicate."></i>

                                      <div id="custom-security-content">


                                          <div class="btn-group" id="custom-security-dropdown">
                                              <a class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                                 href="#">Select Security Protocol <span class="caret"></span></a>
                                              <ul class="dropdown-menu">
                                                  <li><a id="SAML2WebLink" href="#">SAML2 Web SSO</a></li>
                                                  <li><a id="oAuthOPenIdLink" href="#">OpenID Connect</a></li>
                                                  <li><a id="wsFedLink" href="#">WS-Federation (Passive)</a></li>
                                              </ul>

                                              <div class="security-drop-down-status" style="margin-top: 35px"></div>
                                              <label id="agentUrl-error" class="error" hidden="">This field is
                                                  required.</label>
                                          </div>

                                          <!--EO Dropdown for custom app config-->
                                      </div>
                                  </div>
                              </div>
                          </form>
                      </div>
                  </div>
              </div>
              <!--App Type Selection Panel-->
            <!--BOF Gateway Section-->
            <div id="gw-config-section" hidden="">
               <label for="gw-description" >Gateway Configuration </label>
               <div class="panel-group" id="gw-accordion">
                  <div class="panel panel-default">
                     <div class="panel-heading" role="tab" id="gatewayconfig-header" data-toggle="collapse" href="#gatewayconfig" aria-controls="gatewayconfig">
                        <h4 class="panel-title">
                           <a data-toggle="collapse" data-parent="#accordion" href="#gatewayconfig">
                           Gateway Configuration
                           <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                           </a>
                        </h4>
                     </div>
                     <!--Make panel-collapse collapse in to keep it expanded at beginning-->
                     <div id="gatewayconfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="gatewayconfig-header" >
                        <div class="panel-body inverse">
                           <form class="form-horizontal" role="form" id="gatewayConfigForm" name="gatewayConfigForm">
                              <div class="form-group">
                                 <div class="col-md-12">
                                    <div class="checkbox" id="skipgateway-check">
                                       <label ><input type="checkbox" class="custom-checkbox custom-checkbox-white"  value="true" id="skipgateway" name="skipgateway"><span>Skip the Gateway</span></label>
                                    </div>
                                 </div>
                              </div>
                              <div id="gw-config">
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Context <span class="required">*</span></label>
                                       <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                            title="The gateway proxy context of your application."></i>
                                       <input type="text" class="form-control" id="gw-app-context" name="gw-app-context" >
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Access URL <span class="required">*</span></label> <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                            title="The URL from which your application can be accessed."></i>
                                       <input type="text" class="form-control" id="gw-app-url" name="gw-app-url" >
                                    </div>
                                 </div>
                              </div>
                           </form>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <!--EOF Gateway Section-->
            <!--BOF Security Section-->


            <label for="sso-description" id="sso-config-label" hidden>SSO Configuration </label>
            <div id="dynamic-sso-config" class="panel panel-default" style="display: none;">
            </div>

            <div id="security-accordion" >
            <label id="claim-title" for="service-provider-description" >Claim Configuration </label>


                  <div id="securityconfig"  role="tabpanel" aria-labelledby="securityconfig-header" >


                           <div class="panel-heading" role="tab" id="cladimconfig-header" data-toggle="collapse" href="#claimconfig" aria-controls="claimconfig">
                              <h4 class="panel-title">
                                 <a data-toggle="collapse" data-parent="#accordion" href="#claimconfig">
                                 Claim Configuration
                                 <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                 </a>
                              </h4>
                           </div>
                           <!--BOF Claim Config-->
                           <div id="claimconfig"   role="tabpanel" aria-labelledby="claimconfig-header" >
                              <div class="panel-body inverse">
                                 <form class="form-horizontal" role="form" id="claimConfigForm">
                                   <div class="form-group">
                                        <div class="col-md-12">
                                          <label for="claim_dialect">Configure User Claims </label>
                                          <div class="clearfix"></div>
                                          <label class="radio-inline">
                                                <input type="radio"  onclick="claimRadioClick($(this));" name="claim_dialect" id="claim_dialect_wso2" value="local" class="custom-radio">
                                              Add Local Claims
                                          </label>
                                          <label class="radio-inline">
                                                <input type="radio"  onclick="claimRadioClick($(this)); " name="claim_dialect" id="claim_dialect_custom" value="custom" class="custom-radio">Add Custom Claims
                                          </label>
                                        </div>
                                   </div>

                                   <div class="form-group">
                                        <div class="col-md-12">
                                           <div id="local-claim-dropdown" class="input-group input-wrap" hidden>
                                                <select id="local-claim-url" style="float: left;" class="idpClaim form-control">

                                                </select>
                                                <div class="input-group-btn">
                                                    <button class="btn btn-info pull-right" onclick="addClaimIntoList(); return false;"> Add Claim </button>
                                                </div>
                                           </div>
                                           <div id="custom-claim-dropdown" hidden>
                                                <div class="input-group">
                                                    <input class="form-control" id="custom-claim-text-main" type="text" value="" placeholder="Define Custom Claim"/>
                                                    <div class="input-group-btn">
                                                        <select id="custom-claim-url" class="form-control" >claimConfigDropDown</select>
                                                    </div>
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-info pull-right" onclick="addClaimIntoList(); return false;"> Add Claim </button>
                                                    </div>
                                                </div>
                                           </div>
                                        </div>
                                    </div>

                                    <div class="security-type-table">
                                        <div id="claimsConfRow">
                                           <!--<table  class="table-borderless tabel-label">-->
                                           <div id="subjectMappingSelection">
                                               <div class="form-group">
                                                  <div class="col-md-12">
                                                     <label id="subjectClaimURILbl">Select Subject Claim </label>
                                                     <select id="subject_claim_uri" name="subject_claim_uri" class="form-control">
                                                     </select>
                                                  </div>
                                               </div>
                                           </div>
                                           <input type="hidden" name="number_of_claimmappings" id="number_of_claimmappings" value="1">
                                           <div id="localClaimsList" style="display: none;">
                                              <!--render local claims onload-->
                                           </div>
                                           <input type="hidden" id ="local_calim_uris" value="" >
                                        </div>
                                    </div>
                                 </form>
                              </div>
                           </div>
                           <!--EOF Claim Config-->

                        <div class="panel panel-default">
                           <div class="panel-heading" role="tab" id="inbound-auth-header" data-toggle="collapse" href="#inbound-auth" aria-controls="inbound-auth">
                              <h4 class="panel-title">
                                 <a data-toggle="collapse" data-parent="#accordion" href="#inbound-auth">
                                 Inbound Authentication Configuration
                                 <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                 </a>
                              </h4>
                           </div>
                           <!--BOF Inbound Authentication Config-->
                           <div id="inbound-auth" class="panel-collapse collapse" role="tabpanel" aria-labelledby="inbound-auth-header" >
                              <div class="panel-body inverse">
                                 <div class="form-group">
                                    <div class="panel-group property-accordion accordion" id="property-accordion">
                                       <!--BOF SAML Config From Metadata-->
                                       <div class="panel panel-default" id="samlMetadataPanel">
                                          <div class="panel-heading" role="tab" id="samlmeta-header" data-toggle="collapse" href="#samlmeta" aria-controls="samlmeta">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#samlconfig">
                                                Upload SAML Metdata File
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="samlmeta" class="panel-collapse collapse" role="tabpanel" aria-labelledby="samlmeta-header" >
                                             <div class="panel-body inverse">
                                                <form id="addMetadata" class="form-horizontal" role="form" enctype="multipart/form-data">
                                                   <div class="form-group " id="fileRow">
                                                      <div class="col-md-12">
                                                         <div hidden>
                                                            <input type="file" id="uploadfile" onchange="updateCustomSP(this);"/>
                                                         </div>
                                                         <!--<label for="metadataFileName">File Name<span class="required">*</span></label>-->
                                                         <label>Select file <span class="required">*</span></label>
                                                           <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                              title="You can upload samal sso configurations from file"></i>
                                                         <div class="input-group input-wrap">
                                                            <input type="text" class="form-control" id="metadataFileName" name="metadataFileName" disabled="disabled">
                                                            <div class="upload-status"></div>
                                                            <label id="upload-error" class="error" hidden="" >An application with the issuer name already exists</label>
                                                            <div class="input-group-btn btn-add">
                                                                <button class="btn btn-info" type="button" onclick="$('#uploadfile').trigger('click');return false;">Browse</button>
                                                            </div>
                                                         </div>


                                                   </div>
                                                </form>
                                             </div>
                                          </div>
                                       </div>
                                       <!--EOF SAML Config From Metadata>
                                          <!--BOF SAML Config-->
                                       <input type="hidden" value="true" id="isEditSp"/>
                                       <div class="panel panel-default" id="samlPanel">
                                          <div class="panel-heading" role="tab" id="samlconfig-header" data-toggle="collapse" href="#samlconfig" aria-controls="samlconfig">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#samlconfig">
                                                SAML2 Web SSO Configuration
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="samlconfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="samlconfig-header" >
                                             <div class="panel-body inverse">
                                                <form id="addServiceProvider" class="form-horizontal" role="form" name="addServiceProvider" action="">
                                                   <!--<h4>New Service Provider</h4>-->
                                                   <input type="hidden" id="hiddenFields" name="hiddenFields" value="">

                                                   <!--Issuer-->
                                                   <div class="form-group" id="issuerRow">
                                                      <div class="col-md-12">
                                                         <label for="issuer">Issuer <span class="required">*</span></label>
                                                           <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                              title="The unique SAML identifier of your application."></i>
                                                         <input type="text" class="form-control" id="issuer" name="issuer" readonly>
                                                         <input id="hiddenIssuer" type="hidden" value="" name="hiddenIssuer">
                                                          <div class="issuer-status"></div>
                                                             <label id="issuer-error" class="error" hidden="" >An application with the issuer name already exists</label>
                                                      </div>
                                                   </div>
                                                   <!--ACS URL-->
                                                   <div id="acsRow">
                                                      <div class="form-group " id="assertionConsumerURLInputRow">
                                                         <div class="col-md-12">
                                                            <label for="assertionConsumerURLTxt">Assertion Consumer URLs<span class="required">*</span></label>
                                                             <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                                title="The SAML assertion consumer service URLs of your application. This is the location where the SAML assertion is sent with the HTTP POST."></i>
                                                            <div class="input-group input-wrap">
                                                               <input type="text" class="form-control" id="assertionConsumerURLTxt"  name="assertionConsumerURLTxt">
                                                               <div class="urlStatus hide"></div>
                                                               <div class="input-group-btn btn-add">
                                                                  <button class="btn btn-info" type="button" id="addAssertionConsumerURLBtn" onclick="onClickAddACRUrl();"><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--ACS tabel-->
                                                      <div class="form-group security-type-table" >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with acrURLS accordingly-->
                                                            <div id="assertionConsumerURLTblRow">
                                                            </div>
                                                            <input type="hidden" id="assertionConsumerURLs" name="assertionConsumerURLs" value="">
                                                            <input type="hidden" id="currentColumnId" value="0">
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--Default Assertion Consumer Url-->
                                                   <div id="samal-dynamic-hide">
                                                   <div class="form-group" id="defaultAssertionConsumerURLRow" hidden>
                                                      <div class="col-md-12">
                                                         <label for="defaultAssertionConsumerURL" class="control-label">Default Assertion Consumer URL <span class="required">*</span></label>
                                                         <select class="form-control" id="defaultAssertionConsumerURL" name="defaultAssertionConsumerURL">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>
                                                   <!--NameID Format-->
                                                   <div class="form-group" id="nameIDRow">
                                                      <div class="col-md-12">
                                                         <label for="nameIdFormat" class="control-label">NameID format <span class="required">*</span></label>
                                                         <input type="text" class="form-control" id="nameIdFormat" name="nameIdFormat">
                                                      </div>
                                                   </div>


                                                   <!--Response Signing Algorithm-->
                                                   <div class="form-group" id="signingAlgorithmRow">
                                                      <div class="col-md-12">
                                                         <label for="signingAlgorithm" class=" control-label">Response Signing Algorithm
                                                         <span class="required">*</span>
                                                         </label>
                                                         <select class="form-control" id="signingAlgorithm" name="signingAlgorithm">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>
                                                   <!--Response Digest Algorithm-->
                                                   <div class="form-group" id="digestAlgorithmRow">
                                                      <div class="col-md-12">
                                                         <label for="digestAlgorithm" class=" control-label">Response Digest Algorithm
                                                         <span class="required">*</span>
                                                         </label>
                                                         <select class="form-control" id="digestAlgorithm" name="digestAlgorithm">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Response Signing -->
                                                   <div class="form-group" id="enableResponseSignatureRow">
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input  value="true" type="checkbox" class="custom-checkbox custom-checkbox-white" onclick="disableResponseSignature(this);"   id="enableResponseSignature" name="enableResponseSignature" checked><span>Enable Response Signing</span></label>
                                                         <!--<input type="checkbox" class="custom-checkbox custom-checkbox-white" onclick="disableResponseSignature(this);"  name="vehicle" value="Car" checked> <span>Enable Response Signing</span>r<br>-->
                                                         </div>
                                                      </div>
                                                   </div>

                                                   <!--  Enable Single  Logout -->
                                                   <div id="singleLogoutRow" hidden>
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input type="checkbox" class="custom-checkbox custom-checkbox-white" onclick="disableLogoutUrl(this);" value="false" id="enableSingleLogout" name="enableSingleLogout"><span>Enable Single Logout</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--SLO Response URL-->
                                                      <div class="form-group" id="sloResponseURL-form" hidden>
                                                         <div class="col-md-12">
                                                            <label for="sloResponseURL" class="control-label">SLO Response URL
                                                            </label>
                                                            <input type="text" class="form-control" id="sloResponseURL" name="sloResponseURL" disabled="disabled">
                                                            <!--label id="issuer-error" class="error" for="cname" hidden>This field is required.</label-->
                                                         </div>
                                                      </div>
                                                      <!--SLO Request URL-->
                                                      <div class="form-group" id="sloRequestURL-form" hidden>
                                                         <div class="col-md-12">
                                                            <label for="sloRequestURL" class="control-label"> SLO Request URL
                                                            </label>
                                                            <input type="text" class="form-control" id="sloRequestURL" name="sloRequestURL" disabled="disabled">
                                                            <!--label id="issuer-error" class="error" for="cname" hidden>This field is required.</label-->
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Attribute Profile -->
                                                   <div id="attributeRow">
                                                      <div class="form-group" hidden>
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input class="custom-checkbox custom-checkbox-white" id="enableAttributeProfile" type="checkbox" onclick="disableAttributeProfile(this);" name="enableAttributeProfile" value="true" checked><span>Enable Attribute Profile</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Include Attributes in the response always-->
                                                      <div class="form-group" id="enableDefaultAttributeProfileRow">
                                                         <div class="col-md-12">
                                                            <input id="enableDefaultAttributeProfileHidden" type="hidden" name="enableDefaultAttributeProfileHidden"/>
                                                            <div class="checkbox">
                                                               <label><input id="enableDefaultAttributeProfile" class="custom-checkbox custom-checkbox-white" type="checkbox" onclick="disableDefaultAttributeProfile(this);" name="enableDefaultAttributeProfile" disabled="disabled"><span>Include Attributes in the Response Always</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <div class="form-group " id="acsindexRow">
                                                         <div class="col-md-12">
                                                            <label for="acsindex">Attribute Consuming Service Index</label>
                                                            <input type="text" class="form-control" id="acsindex" disabled="disabled">
                                                         </div>
                                                      </div>
                                                   </div>

                                                     <div class="form-group  hide">
                                                         <div class="col-md-12" style="margin-top: 20px">
                                                             <a class="btn btn-form" id="btn-advance-setting" onclick="advanceSettings();return false;"> <i class="fw fw-down"></i>&nbsp;&nbsp;Show Advance Settings  </a>
                                                         </div>
                                                     </div>
                                                   <!--  Enable Audience Restriction-->
                                                   <div id="advanced-settings" hidden>
                                                   <!--<div class="row" style="border-top: solid #282828;border-width: 10px ;"> </div>-->

                                                   <!--  Enable Signature Validation -->
                                                   <div class="form-group"  id="enableSigValidationRow">
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input id="enableSigValidation" class="custom-checkbox custom-checkbox-white" type="checkbox" value="false" name="enableSigValidation" onclick="disableSignatureValidation(this);"><span>Enable Signature Validation in Authentication Requests and Logout Requests</span></label>
                                                         </div>
                                                      </div>
                                                   </div>

                                                   <!--  Enable Assertion Encryption -->
                                                   <div class="form-group" id="enableEncAssertionRow" >
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input id="enableEncAssertion" class="custom-checkbox custom-checkbox-white" type="checkbox" value="false" name="enableEncAssertion" onclick="disableEncAssertion(this);"><span>Enable Assertion Encryption</span></label>
                                                         </div>
                                                      </div>
                                                   </div>

                                                <!--Certificate Alias-->
                                                   <div class="form-group" id="aliasRow">
                                                      <div class="col-md-12" hidden>
                                                         <label for="alias" class="control-label">Certificate Alias </label>
                                                         <select class="form-control" id="alias" name="alias">
                                                            <option value="">---Select---</option>
                                                         </select>
                                                      </div>
                                                   </div>

                                                   <!--Certificate -->
                                                   <div class="form-group" id="certificateRow">
                                                      <div class="col-md-12">
                                                         <label for="publicCertificate">Public Certificate (PEM) </label>
                                                             <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                                title="Base 64 encoded X509 public certificate that is used to verify the digital signature and encrypt the assertion. This can be obtained from the Applications page by clicking DOWNLOAD IDP METADATA."></i>
                                                         <textarea id="publicCertificate" name="publicCertificate" class="form-control" rows="8" ></textarea>
                                                      </div>
                                                   </div>



                                                   <div id="audienceRestrictionRow">
                                                      <div class="form-group security-type-table" hidden>
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input id="enableAudienceRestriction" class="custom-checkbox custom-checkbox-white" type="checkbox" onclick="disableAudienceRestriction(this);" value="true" name="enableAudienceRestriction" checked><span>Enable Audience Restriction</span> </label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Audience Text-->
                                                      <div class="form-group ">
                                                         <div class="col-md-12">
                                                            <label for="audience">Audience Restriction</label> <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                            title="The intended audience of the SAML assertion."></i>

                                                            <div class="input-group input-wrap">
                                                               <input id="audience" class="form-control" type="text"  name="audience" class="input-add">
                                                               <div class="input-group-btn">
                                                                  <button class="btn btn-info btn-add" id="addAudience" type="button" onclick="addAudienceFunc()" value="Add"   name="addAudience"><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Audience Table-->
                                                      <div class="form-group security-type-table" >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with Audience URL-->
                                                            <div  id="audienceTblRow">
                                                            </div>
                                                            <input type="hidden" name="audiencePropertyCounter" id="audiencePropertyCounter" value="0"/>
                                                            <input type="hidden" id="audienceURLs" name="audienceURLs" value="">
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable Recipient Validation-->
                                                   <div id="receipientRow">
                                                      <div class="form-group " hidden>
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input id="enableRecipients" type="checkbox" class="custom-checkbox custom-checkbox-white"  onclick="disableRecipients(this);" value="true" name="enableRecipients" checked hidden><span>Enable Recipient Validation</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Recipient-->
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <label for="recipient">Recipient Validation</label>
                                                            <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                               title="The intended recipients of the SAML assertion."></i>

                                                            <div class="input-group input-wrap">
                                                               <input id="recipient" class="form-control" type="text" name="recipient" class="input-add">
                                                               <div class="input-group-btn">
                                                                  <button id="addRecipient" class="btn btn-info btn-add"  type="button" onclick="addRecipientFunc()" value="Add"   name="addRecipient"><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--Recipient Table-->
                                                      <div class="form-group security-type-table" >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with Audience URL-->
                                                            <div  id="recptTblRow">
                                                            </div>
                                                            <input type="hidden" name="recipientPropertyCounter" id="recipientPropertyCounter"  value="0"/>
                                                            <input type="hidden" name="receipientURLs" id="receipientURLs"  value="0"/>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--   Enable IdP Initiated SSO-->
                                                   <div class="form-group" id="idpInitSSORow">
                                                      <div class="col-md-12">
                                                         <div class="checkbox">
                                                            <label><input type="checkbox" onclick="disableIdPInitSSO(this);" class="custom-checkbox custom-checkbox-white" value="false" id ="enableIdPInitSSO" name="enableIdPInitSSO"><span>Enable IdP Initiated SSO</span></label>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!--  Enable IdP Initiated SLO -->
                                                   <div id="idpInitSLORow" hidden>
                                                      <div class="form-group" hidden>
                                                         <div class="col-md-12">
                                                            <div class="checkbox">
                                                               <label><input type="checkbox" class="custom-checkbox custom-checkbox-white" onclick="disableIdPInitSLO(this);" value="true" id ="enableIdPInitSLO" name="enableIdPInitSLO" checked><span>Enable IdP Initiated SLO</span></label>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--IDP SLO Text-->
                                                      <div class="form-group">
                                                         <div class="col-md-12">
                                                            <label for="returnToURLTxtBox" class=" control-label">IdP Initiated SLO
                                                            </label>
                                                            <div class="input-group input-wrap">
                                                               <input id="returnToURLTxtBox" class="form-control" type="text" placeholder="Return to URL" >
                                                               <div class="input-group-btn">
                                                                  <button id="addReturnToURL" class="btn btn-info" type="button" onclick="addSloReturnToURL()" value="Add"  ><span>Add</span></button>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                      <!--IDP SLO Table Table-->
                                                      <div class="form-group" >
                                                         <div class="col-md-12">
                                                            <!--fill the tabel with Audience URL-->
                                                            <div   id="idpSLOReturnToURLInputRow">
                                                            </div>
                                                            <input type="hidden" id="idpSLOURLs" name="idpSLOURLs" value="">
                                                            <input type="hidden" id="currentReturnToColumnId" value="0">
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <input type="hidden" id="attributeConsumingServiceIndex" name="attributeConsumingServiceIndex"/>
                                                   </div>
                                                  </div>
                                                </form>

                                             </div>
                                          </div>
                                       </div>
                                       <!--EOF SAML Config-->
                                       <!--BOF OAuth Config-->
                                       <input type="hidden" value="true" id="isEditOauthSP"/>
                                       <div class="panel panel-default" id="oauthPanel" hidden>
                                          <div class="panel-heading" role="tab" id="oauthConfig-header" data-toggle="collapse" href="#oauthConfig" aria-controls="oauthConfig">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#oauthConfig">
                                                OpenID Connect Configuration
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="oauthConfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="oauthConfig-header" >
                                             <div class="panel-body inverse">
                                                <form id="oauthAttrIndexForm" class="form-horizontal" style="color: black;" role="form" hidden>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="consumerID">OAuth Client Key<span class="required">*</span></label>
                                                         <div class="input-group input-wrap">
                                                             <input type="text" class="form-control" id="consumerID" disabled="disabled">
                                                             <div class="input-group-btn ">
                                                                   <button class="btn btn-oauth-keys" type="button" id="copy-button-consumerID" data-clipboard-text="" title="Click to copy"><i class="fw fw-copy"></i></button>
                                                             </div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="consumerSecret">OAuth Client Secret</label>
                                                         <div class="input-group input-wrap">
                                                            <input type="password" class="form-control oauth-client-details" id="consumerSecret" disabled="disabled" autocomplete="off">
                                                            <div class="input-group-btn">
                                                               <button class="btn" type="button" id="showSecret" onclick="showHidePassword(this, 'consumerSecret')" name="showSecret"><span id="secretSpan"><i class="fw fw-view"></i></span></button>
                                                               <button class="btn btn-oauth-keys" type="button" id="copy-button-consumerSecret" data-clipboard-text="" title="Click to copy"><i class="fw fw-copy"></i></button>
                                                            </div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position"  onclick="showOauthForm();return false;">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-edit fw-stack-1x"></i>
                                                         </span>
                                                         Edit
                                                         </button>
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" onclick="deleteOauthConfig();return false;">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-delete fw-stack-1x"></i>
                                                         </span>
                                                         Regenerate
                                                         </button>
                                                      </div>
                                                   </div>
                                                </form>
                                                <form id="addAppForm" name="addAppForm" class="form-horizontal" role="form" style="color: black; display: block;">
                                                   <!--<h4>Register New Application</h4>-->
                                                   <!--<h5 style="margin-top: 15px;"> New Application</h5>-->
                                                   <!--Hidden fields-->
                                                   <div id="oauthHiddenFields">
                                                   </div>
                                                   <!--OAuth Version-->
                                                   <div class="form-group hide">
                                                      <div class="col-md-12">
                                                        <div class="hide" id="versionRow"></div>
                                                      </div>
                                                   </div>
                                                   <!--Application Name Hidden Field-->
                                                   <div class="form-group col-md-12" id="appnamehid" hidden>
                                                      <label for="application">Application Name
                                                      </label>
                                                      <input type="text" class="form-control" id="application" name="application">
                                                   </div>
                                                   <!--Grant Types-->
                                                   <div class="form-group" style="display: block;" hidden>
                                                      <div class="col-md-12" id="grant_row" name="grant_row">
                                                         <!--Filled in oauthConfig.js-->
                                                      </div>
                                                   </div>
                                                   <div class="pkce-container">
                                                       <div class="help-note">Note : PKCE is only supported for Code grant.</div>
                                                       <div class="form-group">
                                                            <!--PKCE Mandatory-->
                                                            <div id="pkce_enable" style="display: block;" hidden>
                                                                  <div class="col-md-12">
                                                                     <div class="checkbox">
                                                                        <label>
                                                                        <input class="custom-checkbox custom-checkbox-white" type="checkbox" value="mandatory" name="pkce" id="pkce">
                                                                        <span>PKCE Mandatory</span>
                                                                        </label>
                                                                     </div>
                                                                     <span class="help-block text-white">Only allow applications that bear PKCE Code Challenge with them. </span>
                                                                  </div>
                                                            </div>
                                                            <!--PKCE Support plain-->
                                                            <div id="pkce_support_plain" style="display: block;" hidden>
                                                                  <div class="col-md-12">
                                                                     <div class="checkbox">
                                                                        <label><input class="custom-checkbox custom-checkbox-white" type="checkbox" checked="" value="yes" id="pkce_plain" name="pkce_plain"><span>Support PKCE Plain Transform Algorithm</span></label>
                                                                     </div>
                                                                     <span class="help-block text-white"> Server supports 'S256' PKCE tranformation algorithm by default. </span>
                                                                  </div>
                                                            </div>
                                                       </div>
                                                   </div>
                                                   <!--Callback Url-->
                                                   <div class="form-group" id="callback_row" hidden>
                                                      <div class="col-md-12">
                                                         <label for="callback">Redirect URL <span class="required">*</span></label>
                                                         <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                            title="The redirection endpoint URL of your application. This is the location where the OpenID Connect authentication response is redirected."></i>
                                                         <input type="text" class="form-control callback" id="callback" name="callback" required />
                                                         <div class="callbackStatus"></div>
                                                      </div>
                                                   </div>
                                                   <!--Buttons-->
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" id="oauthRgsterBtn" onclick="onClickAdd();">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-key fw-stack-1x"></i>
                                                         </span>
                                                         Generate Keys
                                                         </button>
                                                         <button class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" id="oauthUpdtBtn" onclick="onClickUpdate();">
                                                         <span class="fw-stack btn-action-ico">
                                                         <i class="fw fw-circle-outline fw-stack-2x"></i>
                                                         <i class="fw fw-save fw-stack-1x"></i>
                                                         </span>
                                                         Update
                                                         </button>
                                                      </div>
                                                   </div>
                                                </form>
                                             </div>
                                          </div>
                                       </div>
                                       <!--EOF OAuth Config-->
                                       <!--BOF WS-Federation Config-->
                                       <div class="panel panel-default" id="wsfedPanel" hidden>
                                          <div class="panel-heading" role="tab" id="wsfed-header" data-toggle="collapse" href="#wsfed" aria-controls="wsfed">
                                             <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#wsfed">
                                                WS-Federation (Passive) Configuration
                                                <span class="pull-right clickable"><i class="fw fw-up"></i></span>
                                                </a>
                                             </h4>
                                          </div>
                                          <div id="wsfed" class="panel-collapse collapse" role="tabpanel" aria-labelledby="wsfed-header" >
                                             <div class="panel-body inverse">
                                                <form class="form-horizontal" role="form" id="wsfed-form" name="wsfed-form">
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="passiveSTSRealm">Realm <span class="required">*</span></label>
                                                         <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                            title="The security domain of your application."></i>
                                                         <input type="text" class="form-control required" id="passiveSTSRealm" name="passiveSTSRealm"/>
                                                      </div>
                                                   </div>
                                                   <div class="form-group">
                                                      <div class="col-md-12">
                                                         <label for="passiveSTSWReply">Wreply URL </label>
                                                         <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                                            title="The endpoint URL of your application to which Passive STS responses are directed."></i>
                                                         <input type="text" class="form-control" id="passiveSTSWReply" name="passiveSTSWReply" />
                                                      </div>
                                                   </div>
                                                </form>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!--EOF Inbound Authentication Config-->
                        </div>
                  </div>
            </div>

            <!--EOF Security Section-->
            <!--BOF Store Config-->
            <div id="store-config-section">
               <label for="store-description" >Store Configuration </label>
               <div class="panel-group" id="store-accordion">
                  <div class="panel panel-default">
                     <div class="panel-heading" role="tab" id="storeconfig-header" data-toggle="collapse" href="#storeconfig" aria-controls="gatewayconfig">
                        <h4 class="panel-title">
                           <a data-toggle="collapse" data-parent="#accordion" href="#storeconfig">
                           Store Configuration
                           <span class="pull-right clickable" id="span-head-security" ><i class="fw fw-up" id="up-icon"></i></span>
                           </a>
                        </h4>
                     </div>
                     <!--Make panel-collapse collapse in to keep it expanded at beginning-->
                     <div id="storeconfig" class="panel-collapse collapse" role="tabpanel" aria-labelledby="storeconfig-header" >
                        <div class="panel-body inverse">
                           <form class="form-horizontal" role="form" id="storeConfigForm" name="storeConfigForm">
                              <div id="gw-config">
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Display Name <span class="required">*</span></label>
                                       <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                          title="The name displayed for the application in the user portal."></i>
                                       <input type="text" class="form-control" id="store-app-name" name="store-app-name" >
                                       <input type="hidden" class="form-control" id="app-id" name="app-id" >
                                    </div>
                                 </div>
                                 <div class="form-group" id="store-app-url-sec">
                                    <div class="col-md-12">
                                       <label>Access URL <span class="required">*</span></label>
                                       <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                          title="The URL from which your application can be accessed."></i>
                                       <input type="text" class="form-control" id="store-app-url" name="store-app-url" >
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Tags</label>
                                       <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                          title="Tags to categorize your applications in the user portal."></i>
                                       <select class="form-control" id="store-app-tags" name="store-app-tags" multiple="multiple"></select>
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <div class="col-md-12">
                                       <label>Visibility </label>
                                       <i class="fa fa-question-circle help-tips" data-toggle="tooltip" data-placement="right"
                                          title="User roles who can access or view the application."></i>
                                       <input type="text" class="form-control" id="store-app-visibility" name="store-app-visibility" >
                                    </div>
                                 </div>
                                 <div class="form-group" id="sso-thumb">
                                    <div class="col-md-12">
                                        <label>App Icon</label>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div id="thumb-img-ele">
                                                    <img id="sp-img-thumb" src="../images/is/custom.png" alt="thumbnail image" title="custom thumbnail image" class="logo">
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <span class="btn btn-default btn-file"> Upload an image
                                                <input type="file" class="form-control" id="store-app-thumbnail" name="store-app-thumbnail" accept="image/gif, image/jpeg, image/png, image/jpg" >
                                                </span>
                                            </div>
                                        </div>

                                        <span class="help-note">Upload a thumbnail image</span>
                                        <input type="hidden" class="form-control" id="store-app-thumbnail-url" name="store-app-thumbnail-url" >
                                    </div>
                                  </div>
                                  <div class="form-group" id="sso-banner">
                                    <div class="col-md-12">
                                        <label>Banner</label>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div id="banner-img-ele"></div>
                                                <img style="width: 100%; " id="sp-img-banner" src="../images/is/banner_placeholder.jpg"  alt="banner image" title="custom banner image" class="logo">
                                            </div>
                                            <div class="col-md-12">
                                                <span class="btn btn-default btn-file" style="margin-top: 5px"> Upload an image
                                                <input type="file" class="form-control" id="store-app-banner" name="store-app-banner" accept="image/gif, image/jpeg, image/png, image/jpg" >
                                                </span>
                                            </div>
                                        </div>
                                        <span class="help-note">Upload a banner image to show in the store details page</span>
                                        <input type="hidden" class="form-control" id="store-app-banner-url" name="store-app-banner-url" >
                                    </div>
                                  </div>
                              </div>
                              <!--EOF Store Config-->
                           </form>
                        </div>
                     </div>
                  </div>
               </div>
                  <div class="form-status"></div>
            <label id="form-error" class="error" hidden="" >An error occurred while updating the application</label>
            </div>

            <div class="row" style="margin-bottom: 50px" id="btn-main-update">
                 <div class="col-md-12">
                   <button id="update-main" class="cu-btn cu-btn-sm cu-btn-blue cu-btn-position" onclick="validateInputs();" >
                   <i id="update-spinner" class="fw-loader5 fw-spin fw-2x" style="display: none;"></i>
                   <span class="fw-stack btn-action-ico" id="update-icon">
                   <i class="fw fw-circle-outline fw-stack-2x"></i>
                   <i class="fw fw-save fw-stack-1x"></i>
                   </span>
                   Save
                   </button>
                 </div>
            </div>
            </div>
         </div>
      </div>
   </div>
   <!--row-->
</div>
    <!-- BOF add loading overlay -->
    <div id="img-loader" class="loading-overlay" style="padding: 150px">
        <div class="loader">
            <div class="row-centered " id="progress-icon">
            <div   id="process-icon"><i class="fw-loader5 fw-spin fw-5x"></i></div>
                <div class="app-listing-loader">
                    <div class="loading-logo">
                        <p style="padding-top: 20px">Loading..</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- EOF add loading overlay --

<!-- /.container -->
<div id="push"></div>
</div>

<div id="tempStore">

</div>

</div>
<!--Inner Wrapper-->
<%
include("/templates/footer.jag");
%>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../js/bootstrap-3.2.0/bootstrap.min.js"></script>
<!-- include custom js functions -->
<script src="../js/custom/custom.js"></script>
<script src="../js/custom/jquery.validate.min.js"></script>
<script src="../js/custom/constants.js"></script>
<script type="text/javascript" src="/admin/csrf.js"></script>
<script>

var samlHtml = '<div class="btn-group" style="display: none" id="sso-drop-down">'+

'                   <label class="radio-inline">'+
'                          <input type="radio" onclick="changeRadioGroup($(this))" name="sso-radio" class="custom-radio"'+
'                                 id="radioCm" checked="true"/>Configure Manually'+
'                   </label>'+
'                 <label class="radio-inline">'+
'                          <input type="radio" onclick="changeRadioGroup($(this))" name="sso-radio" lass="custom-radio"'+
'                                 id="radioCf"/>Upload SAML Metadata File'+
'                 </label>'+
'               </div>';



$('.side-pane-trigger').click(function(){
    var rightPane = $('.right-pane');
    var leftPane = $('.left-pane');
    if (rightPane.hasClass('visible')){
        rightPane.animate({"left":"0em"}, "slow").removeClass('visible');
        leftPane.animate({"left":"-18em"}, "slow");
        $(this).find('i').removeClass('fa-arrow-left').addClass('fa-reorder');
    } else {
        rightPane.animate({"left":"18em"}, "slow").addClass('visible');
        leftPane.animate({"left":"0em"}, "slow");
        $(this).find('i').removeClass('fa-reorder').addClass('fa-arrow-left');
    }
});

$("#sso-drop-down .dropdown-menu li a").click(function () {
    var selText = $(this).text();
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');

});

function changeRadioGroup(obj) {
    if (obj.attr('id') === "radioCf") {
        if ($("#custom-security-content").find("#fileRow").length == 0) {
            $("#samlconfig").slideToggle(1000);
            var uploadContent = $("#fileRow").clone();
            $("#custom-sso-drop-down").after("<div class='row' style='padding: 10px;' id='dynamic-csdd'> </div>");
            uploadContent.insertAfter("#dynamic-csdd").hide();
            uploadContent.slideToggle(1000);
        }
    } else {
        $("#samlconfig").slideToggle(1000);
        $("#fileRow").remove();
        $("#dynamic-csdd").remove();
    }
}



$("#custom-app-dropdown .dropdown-menu li a").click(function () {

    var selText = $(this).text();
    var selId = this.id;
    var docUrls = <%=docUrls%>;
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');

    switch (selId) {
        case 'agenttype':
            $("#skipgateway").prop('checked', true);
            $("#gw-config-section").hide();
            $("#security-type").show();
             //show claim config
            $("#subjectMappingSelection").hide();
            $('#subject_claim_uri').val('')
            $("#security-accordion").show();
            $("#cladimconfig-header").remove();
            $("#inbound-auth-header").hide();
            //set app type description
            $("#app-type-desc-span").text("Application should be able to generate standard SSO requests and process responses.");
            $("#app-type-desc-url").attr('href', ((docUrls && docUrls.agentType) ? docUrls.agentType : '#'));
            break;
        case 'proxytype':
            $("#skipgateway").prop('checked', false);
            $("#skipgateway-check").closest('.form-group').hide();
            $("#store-app-url-sec").hide();
            $("#security-type").hide();
            $("#gw-config-section").show();
            $("#gatewayconfig").attr('class', '');
            $("#gw-config-section").find('.panel-heading').remove();

            $("#gatewayConfigForm").validate(); //sets up the validator since dynamically added elements here
            $("input[id*=gw-app-context]").rules("add", "required");
            $("input[id*=gw-app-url]").rules("add", "required");
            $("input[id*=gw-app-url]").rules("add", "url");

            //show claim config
            $("#subjectMappingSelection").hide();
            $('#subject_claim_uri').val('')
            $("#security-accordion").show();
            $("#cladimconfig-header").remove();
            $("#inbound-auth-header").hide();
            $("#claim_dialect_custom").show().closest('label').show();
            $("#securityconfig").show();
            $("#claim-title").show();

            //set app type description
            $("#app-type-desc-span").text("Identity gateway handles authentication on behalf of the application.");
            $("#app-type-desc-url").attr('href', ((docUrls && docUrls.proxyType) ? docUrls.proxyType : '#'));
            break;
        case 'shortcut' :
            $("#skipgateway").prop('checked', true);
            $("#security-type").hide();
            $("#securityconfig").hide();
            $("#claim-title").hide();
            $("#gw-config-section").hide();
            $("#store-app-url-sec").show();

            //set app type description
            $("#app-type-desc-span").text("A direct hyperlink to the application (without enforcing any authentication).");
            $("#app-type-desc-url").attr('href', ((docUrls && docUrls.shortcut) ? docUrls.shortcut : '#'));
            break;
        default:
    }
});

var samlconf, oauthconf, wsfedconf = null;

$("#custom-security-content .dropdown-menu li a").click(function () {
    var selText = $(this).text();
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');

    switch (selText) {
        case 'SAML2 Web SSO':
            $("#custom-security-dropdown").nextAll().remove();
            $("#security-type").find("#oauthConfig").remove();
            reAppend("oauthConfig", oauthconf);
            $("#security-type").find("#wsfed").remove();
            reAppend("wsfed", wsfedconf);

            var dropdown = $("#sso-drop-down").clone();

            if (dropdown.length > 0) {
                $("#sso-drop-down").remove();
            } else {
                dropdown = $(samlHtml);
            }

            dropdown.attr('style', '').show().attr('id', 'custom-sso-drop-down');
            dropdown.find('a').attr('onclick', 'changeUC($(this),"custom")');
            $("#custom-security-dropdown").after("<div class='row' style='padding: 14px;' id='dynamic-sdd'> </div>");
            $("#dynamic-sdd").after(dropdown);
            $("#samlconfig .panel-body").addClass('padding-top-zero');


            if (!samlconf) {
                samlconf = $("#samlconfig").clone();
            }
            $("#samlconfig").remove();
            samlconf.removeClass("panel-collapse collapse");
            $("#security-type").append(samlconf).show();

            break;
        case 'OpenID Connect':
            $("#custom-security-dropdown").nextAll().remove();
            // remove already added
            $("#security-type").find("#wsfed").remove();
            reAppend("wsfed", wsfedconf);
            $("#security-type").find("#samlconfig").remove();
            reAppend("samlconfig", samlconf);

            if (!oauthconf) {
                oauthconf = $("#oauthConfig").clone();
            }
            $("#oauthConfig").remove();
            oauthconf.removeClass("panel-collapse collapse");
            $("#security-type").append(oauthconf).show();

            $(".btn-oauth-keys").each(function() {
                $(this).attr("data-clipboard-text", $(this).closest('.input-group-btn').prev().val());
            });
            $('.btn-oauth-keys').zclip();

            break;
        case 'WS-Federation (Passive)' :
            $("#custom-security-dropdown").nextAll().remove();
            $("#security-type").find("#oauthConfig").remove();
            reAppend("oauthConfig", oauthconf);
            $("#security-type").find("#samlconfig").remove();
            reAppend("samlconfig", samlconf);

            if (!wsfedconf) {
                wsfedconf = $("#wsfed").clone();
            }
            $("#wsfed").remove();
            wsfedconf.removeClass("panel-collapse collapse");
            $("#security-type").append(wsfedconf).show();

            break;
        default:
    }
});


$("#store-app-thumbnail").change(function (e) {
    for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {
        var file = e.originalEvent.srcElement.files[i];
        var img = document.createElement("img");
        var ele = $('<img/>');
        var reader = new FileReader();
        reader.onloadend = function () {
            ele.attr('src', reader.result);
            ele.attr('style', 'width: 60px;margin-top: 10px;background-color: #525252;');
            ele.attr('id', 'dynamic-upld-imgt');
        };
        reader.readAsDataURL(file);
        $("#dynamic-upld-imgt").remove();
        $("#thumb-img-ele").after(ele);
        $("#banner-img").remove();
        $("#sp-img-thumb").remove();
    }
});


$("#store-app-banner").change(function (e) {
    for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {
        var file = e.originalEvent.srcElement.files[i];
        var img = document.createElement("img");
        var ele = $('<img/>');
        var reader = new FileReader();
        reader.onloadend = function () {
            ele.attr('src', reader.result);
            ele.attr('style', 'width: 50%;background-color: #525252;');
            ele.attr('id', 'dynamic-upld-imgb');

        };
        reader.readAsDataURL(file);
        $("#dynamic-upld-imgb").remove();
        $("#banner-img-ele").after(ele);
        $("#banner-img").remove();
        $("#sp-img-banner").remove();
    }
});


function reAppend(source, object) {
    var elements = $("#security-type").find("#" + source);
    if (elements && elements.length === 1) {
        $("#tempStore").append(object);
    }
}

$.fn.zclip = function() {

    if(typeof ZeroClipboard == 'function'){
        var client = new ZeroClipboard( this );
        client.on( "ready", function( readyEvent ) {
            client.on( "aftercopy", function( event ) {
                var target = $(event.target);
                target.attr("title","Copied!");
                target.tooltip('enable');
                target.tooltip("show");
                target.tooltip('disable');
            });
        });
    }else{
        console.warn('Warning : Dependency missing - ZeroClipboard Library');
    }
    return this;
}

</script>
<script>
var cookie = null;
var json = null;
var userName = null;
var userInfo = null;
//var serverUrl = window.location.host + PROXY_CONTEXT_PATH;

       var appName = $('#appName').attr('value');
       var userName = null;
        var cookie = null;
        cookie = "<%=session.get('auth-cookie')%>";
        userName = "<%=session.get('user')%>";
            preDrawUpdatePage(appName);

</script>
</body>
</html>
